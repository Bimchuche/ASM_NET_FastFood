<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>@ViewData["Title"] - Admin FastFood</title>
    <link href="~/admin/css/bootstrap.min.css" rel="stylesheet" />
    <link href="~/admin/css/admin-theme.css" rel="stylesheet" />
    
    <!-- GLOBAL FONT: Times New Roman Bold -->
    <link href="~/css/global-font.css" rel="stylesheet" />
    <!-- Page Loader -->
    <link href="~/client/css/page-loader.css" rel="stylesheet" />
    
    @RenderSection("Styles", required: false)
</head>

<body class="admin-body">
    <!-- LOADING OVERLAY -->
    <div id="page-loader" class="page-loader">
        <div class="loader-float-item">üìä</div>
        <div class="loader-float-item">üì¶</div>
        <div class="loader-float-item">üë•</div>
        <div class="loader-float-item">üìã</div>
        <div class="loader-float-item">‚öôÔ∏è</div>
        <div class="loader-float-item">üì•</div>
        
        <div class="loader-content">
            <div class="loader-main">
                <div class="loader-ring"></div>
                <div class="loader-ring"></div>
                <div class="loader-ring"></div>
                <div class="loader-icon">‚öôÔ∏è</div>
            </div>
            <div class="loader-brand">ADMIN PANEL</div>
            <div class="loader-text">ƒêang t·∫£i</div>
            <div class="loader-progress">
                <div class="loader-progress-bar"></div>
            </div>
        </div>
    </div>

    @{
        var currentController = ViewContext.RouteData.Values["controller"]?.ToString() ?? "";
        var currentAction = ViewContext.RouteData.Values["action"]?.ToString() ?? "";
    }

    <!-- SIDEBAR -->
    <aside class="admin-sidebar">
        <div class="sidebar-brand">
            <span class="logo">üçî</span>
            <div>
                <h2>FastFood</h2>
                <small>Admin Panel</small>
            </div>
        </div>

        <ul class="sidebar-menu">
            @* ADMIN MENU *@
            @if (User.IsInRole("Admin"))
            {
                <li class="menu-label">T·ªïng quan</li>
                <li>
                    <a asp-area="Admin" asp-controller="Dashboard" asp-action="Index"
                       class="@(currentController == "Dashboard" ? "active" : "")">
                        <span class="icon">üìä</span>
                        <span>Dashboard</span>
                    </a>
                </li>

                <li class="menu-label">Qu·∫£n l√Ω s·∫£n ph·∫©m</li>
                <li>
                    <a asp-area="Admin" asp-controller="Food" asp-action="Index"
                       class="@(currentController == "Food" ? "active" : "")">
                        <span class="icon">üçï</span>
                        <span>M√≥n ƒÉn</span>
                    </a>
                </li>
                <li>
                    <a asp-area="Admin" asp-controller="Combo" asp-action="Index"
                       class="@(currentController == "Combo" ? "active" : "")">
                        <span class="icon">üéÅ</span>
                        <span>Combo</span>
                    </a>
                </li>
                <li>
                    <a asp-area="Admin" asp-controller="Category" asp-action="Index"
                       class="@(currentController == "Category" ? "active" : "")">
                        <span class="icon">üìÇ</span>
                        <span>Danh m·ª•c</span>
                    </a>
                </li>

                <li class="menu-label">Qu·∫£n l√Ω ƒë∆°n h√†ng</li>
                <li>
                    <a asp-area="Admin" asp-controller="Order" asp-action="Index"
                       class="@(currentController == "Order" && ViewContext.RouteData.Values["action"]?.ToString() != "Completed" ? "active" : "")">
                        <span class="icon">üì¶</span>
                        <span>ƒê∆°n h√†ng</span>
                    </a>
                </li>
                <li>
                    <a asp-area="Admin" asp-controller="Order" asp-action="Completed"
                       class="@(ViewContext.RouteData.Values["action"]?.ToString() == "Completed" ? "active" : "")">
                        <span class="icon">‚úÖ</span>
                        <span>Shipper</span>
                    </a>
                </li>

                <li class="menu-label">Qu·∫£n l√Ω ng∆∞·ªùi d√πng</li>
                <li>
                    <a asp-area="Admin" asp-controller="User" asp-action="Index"
                       class="@(currentController == "User" ? "active" : "")">
                        <span class="icon">üë•</span>
                        <span>Ng∆∞·ªùi d√πng</span>
                    </a>
                </li>

                <li class="menu-label">H·ªá th·ªëng</li>
                <li>
                    <a asp-area="Admin" asp-controller="Activity" asp-action="Index"
                       class="@(currentController == "Activity" ? "active" : "")">
                        <span class="icon">üìã</span>
                        <span>Nh·∫≠t k√Ω ho·∫°t ƒë·ªông</span>
                    </a>
                </li>
                <li>
                    <a asp-area="Admin" asp-controller="Chat" asp-action="Index"
                       class="@(currentController == "Chat" ? "active" : "")">
                        <span class="icon">üí¨</span>
                        <span>Chat h·ªó tr·ª£</span>
                    </a>
                </li>
                <li>
                    <a asp-area="Admin" asp-controller="Trash" asp-action="Index"
                       class="@(currentController == "Trash" ? "active" : "")">
                        <span class="icon">üóëÔ∏è</span>
                        <span>Th√πng r√°c</span>
                    </a>
                </li>

                <li class="menu-label">Khuy·∫øn m√£i & B√°o c√°o</li>
                <li>
                    <a asp-area="Admin" asp-controller="Coupon" asp-action="Index"
                       class="@(currentController == "Coupon" ? "active" : "")">
                        <span class="icon">üéüÔ∏è</span>
                        <span>M√£ gi·∫£m gi√°</span>
                    </a>
                </li>
                <li>
                    <a asp-area="Admin" asp-controller="Export" asp-action="Index"
                       class="@(currentController == "Export" ? "active" : "")">
                        <span class="icon">üì•</span>
                        <span>Xu·∫•t Excel</span>
                    </a>
                </li>
                <li>
                    <a asp-area="Admin" asp-controller="ShippingZone" asp-action="Index"
                       class="@(currentController == "ShippingZone" ? "active" : "")">
                        <span class="icon">üöö</span>
                        <span>Khu v·ª±c giao h√†ng</span>
                    </a>
                </li>
            }

            @* STAFF MENU *@
            @if (User.IsInRole("Staff"))
            {
                <li class="menu-label">Nh√¢n vi√™n</li>
                <li>
                    <a asp-area="Admin" asp-controller="Dashboard" asp-action="Index"
                       class="@(currentController == "Dashboard" ? "active" : "")">
                        <span class="icon">üìä</span>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li>
                    <a asp-area="Admin" asp-controller="Order" asp-action="Index"
                       class="@(currentController == "Order" ? "active" : "")">
                        <span class="icon">üì¶</span>
                        <span>ƒê∆°n h√†ng</span>
                    </a>
                </li>
            }

            @* SHIPPER MENU *@
            @if (User.IsInRole("Shipper"))
            {
                <li class="menu-label">Shipper</li>
                <li>
                    <a asp-area="Shipper" asp-controller="Shipper" asp-action="Index"
                       class="@(currentController == "Shipper" ? "active" : "")">
                        <span class="icon">üöö</span>
                        <span>ƒê∆°n ƒëang giao</span>
                    </a>
                </li>
            }

            <li class="menu-label">T√†i kho·∫£n</li>
            <li>
                <a href="/">
                    <span class="icon">üè†</span>
                    <span>V·ªÅ trang ch·ªß</span>
                </a>
            </li>
            <li>
                <a asp-area="" asp-controller="Account" asp-action="Logout">
                    <span class="icon">üö™</span>
                    <span>ƒêƒÉng xu·∫•t</span>
                </a>
            </li>
        </ul>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="admin-main">
        <!-- TOPBAR -->
        <header class="admin-topbar">
            <div class="topbar-title">
                <h1>@ViewData["Title"]</h1>
                <p>Ch√†o m·ª´ng b·∫°n quay tr·ªü l·∫°i!</p>
            </div>
            <div class="topbar-actions">
                <div class="user-dropdown">
                    <div class="user-avatar">
                        @(User.Identity?.Name?.Substring(0, 1).ToUpper() ?? "A")
                    </div>
                    <span>@User.Identity?.Name</span>
                </div>
            </div>
        </header>

        <!-- CONTENT -->
        <div class="admin-content">
            @RenderBody()
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="~/admin/js/dashboard.js"></script>
    <!-- Page Loader -->
    <script src="~/client/js/page-loader.js"></script>
    @RenderSection("Scripts", required: false)

</body>

</html>