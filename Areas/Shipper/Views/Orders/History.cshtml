@using ASM1_NET.Models
@model IEnumerable<Order>
@{
    ViewData["Title"] = "Lá»‹ch sá»­ giao hÃ ng";
    var totalOrders = ViewBag.TotalOrders ?? 0;
    var totalEarnings = ViewBag.TotalEarnings ?? 0m;
    var fromDate = ViewBag.FromDate ?? "";
    var toDate = ViewBag.ToDate ?? "";
}

<h1 class="shipper-title">ğŸ“Š Lá»‹ch sá»­ giao hÃ ng</h1>

<a href="/Shipper/Orders/MyOrders" style="color: var(--shipper-primary); display: inline-block; margin-bottom: 20px;">
    â† Quay láº¡i Ä‘Æ¡n cá»§a tÃ´i
</a>

<!-- FILTER -->
<div style="background: white; padding: 20px; border-radius: 16px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.05);">
    <form method="get" style="display: flex; gap: 15px; flex-wrap: wrap; align-items: flex-end;">
        <div style="flex: 1; min-width: 150px;">
            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #64748b;">Tá»« ngÃ y</label>
            <input type="date" name="fromDate" value="@fromDate" 
                   style="width: 100%; padding: 10px; border: 1px solid #e2e8f0; border-radius: 8px;" />
        </div>
        <div style="flex: 1; min-width: 150px;">
            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #64748b;">Äáº¿n ngÃ y</label>
            <input type="date" name="toDate" value="@toDate" 
                   style="width: 100%; padding: 10px; border: 1px solid #e2e8f0; border-radius: 8px;" />
        </div>
        <div>
            <button type="submit" class="order-btn accept" style="padding: 10px 25px;">
                ğŸ” Lá»c
            </button>
        </div>
        <div>
            <a href="/Shipper/Orders/History" class="order-btn view" style="padding: 10px 25px; display: inline-block;">
                â†º Reset
            </a>
        </div>
    </form>
</div>

<!-- STATS -->
<div class="shipper-stats">
    <div class="shipper-stat-card">
        <div class="shipper-stat-icon success">ğŸ“¦</div>
        <div class="shipper-stat-info">
            <h3>@totalOrders</h3>
            <p>ÄÆ¡n Ä‘Ã£ giao</p>
        </div>
    </div>
    <div class="shipper-stat-card">
        <div class="shipper-stat-icon info">ğŸ’°</div>
        <div class="shipper-stat-info">
            <h3>@(((decimal)totalEarnings).ToString("N0")) â‚«</h3>
            <p>Tá»•ng doanh thu</p>
        </div>
    </div>
</div>

@if (!Model.Any())
{
    <div class="empty-state">
        <div class="icon">ğŸ“­</div>
        <h3>ChÆ°a cÃ³ Ä‘Æ¡n hoÃ n thÃ nh nÃ o</h3>
        <p>HÃ£y báº¯t Ä‘áº§u giao hÃ ng Ä‘á»ƒ xem lá»‹ch sá»­!</p>
    </div>
}
else
{
    <div style="background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.05);">
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="background: #f8fafc;">
                    <th style="padding: 15px; text-align: left;">MÃ£ Ä‘Æ¡n</th>
                    <th style="padding: 15px; text-align: left;">KhÃ¡ch hÃ ng</th>
                    <th style="padding: 15px; text-align: left;">Äá»‹a chá»‰</th>
                    <th style="padding: 15px; text-align: right;">Tá»•ng tiá»n</th>
                    <th style="padding: 15px; text-align: center;">NgÃ y giao</th>
                    <th style="padding: 15px; text-align: center;"></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var order in Model)
                {
                    var customerName = order.Customer?.FullName ?? "KhÃ¡ch hÃ ng";
                    
                    <tr style="border-bottom: 1px solid #e2e8f0;">
                        <td style="padding: 15px; font-weight: 600;">#@order.OrderCode</td>
                        <td style="padding: 15px;">@customerName</td>
                        <td style="padding: 15px; max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                            @order.Address
                        </td>
                        <td style="padding: 15px; text-align: right; font-weight: 600; color: #059669;">
                            @order.TotalAmount.ToString("N0") â‚«
                        </td>
                        <td style="padding: 15px; text-align: center; color: #64748b;">
                            @order.OrderDate.ToString("dd/MM/yyyy")
                        </td>
                        <td style="padding: 15px; text-align: center;">
                            <a href="/Shipper/Orders/Detail/@order.Id" class="order-btn view" style="padding: 6px 12px; font-size: 0.8rem;">
                                ğŸ‘ï¸ Chi tiáº¿t
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
}
