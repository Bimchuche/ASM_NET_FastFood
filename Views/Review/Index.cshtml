@model List<ASM1_NET.Models.Review>
@{
    ViewData["Title"] = "ƒê√°nh gi√° t·ª´ kh√°ch h√†ng";
}

<link rel="stylesheet" href="~/client/css/fastfood-theme.css" />
<link rel="stylesheet" href="~/client/css/review-list.css" />

<div class="review-list-page">
    <div class="container">
        <div class="review-hero">
            <h1>‚≠ê ƒê√°nh gi√° t·ª´ kh√°ch h√†ng</h1>
            <p>Xem nh·ªØng nh·∫≠n x√©t t·ª´ kh√°ch h√†ng ƒë√£ mua h√†ng</p>
        </div>

        <div class="reviews-grid">
            @if (Model == null || !Model.Any())
            {
                <div class="review-empty-state">
                    <div class="review-empty-icon">üí¨</div>
                    <h3>Ch∆∞a c√≥ ƒë√°nh gi√° n√†o</h3>
                    <p>H√£y l√† ng∆∞·ªùi ƒë·∫ßu ti√™n ƒë√°nh gi√° sau khi mua h√†ng!</p>
                </div>
            }
            else
            {
                @foreach (var review in Model)
                {
                    var productName = review.Food?.Name ?? review.Combo?.Name ?? "S·∫£n ph·∫©m";
                    var productImage = review.Food?.ImageUrl ?? review.Combo?.ImageUrl ?? "/images/no-image.png";
                    var userName = review.User?.FullName ?? "Kh√°ch h√†ng";
                    var initial = userName.Length > 0 ? userName[0].ToString().ToUpper() : "K";
                    
                    <div class="review-card">
                        <div class="review-header">
                            <div class="review-user">
                                <div class="review-avatar">@initial</div>
                                <div class="review-meta">
                                    <h4>@userName</h4>
                                    <span>@review.CreatedAt.ToString("dd/MM/yyyy")</span>
                                </div>
                            </div>
                            <div class="review-stars">
                                @for (int i = 1; i <= 5; i++)
                                {
                                    @(i <= review.Rating ? "‚òÖ" : "‚òÜ")
                                }
                            </div>
                        </div>
                        
                        <div class="review-product">
                            <img src="@productImage" alt="@productName" onerror="this.src='/images/no-image.png'" />
                            <span class="review-product-name">@productName</span>
                        </div>
                        
                        @if (!string.IsNullOrEmpty(review.Comment))
                        {
                            <p class="review-comment">"@review.Comment"</p>
                        }
                    </div>
                }
            }
        </div>
    </div>
</div>
