@model ASM1_NET.Models.User
@{
    ViewData["Title"] = "H·ªì s∆° c√° nh√¢n";
}

<link rel="stylesheet" href="~/client/css/fastfood-theme.css" />
<link rel="stylesheet" href="~/client/css/profile.css" />

<div class="profile-page">
    <div class="profile-wrapper">
        <!-- Hero -->
        <div class="profile-hero">
            <h1>üë§ H·ªì s∆° c√° nh√¢n</h1>
            <p>Qu·∫£n l√Ω th√¥ng tin t√†i kho·∫£n c·ªßa b·∫°n</p>
        </div>
        
        <div class="profile-main-card">
            <!-- Avatar Section -->
            <div class="profile-avatar-section">
                <form id="avatarForm" action="/Account/UpdateAvatar" method="post" enctype="multipart/form-data">
                    <input type="file" id="avatarInput" name="avatar" accept="image/*" style="display: none;" 
                           onchange="document.getElementById('avatarForm').submit();" />
                    
                    <div class="profile-avatar-wrapper">
                        @if (!string.IsNullOrEmpty(Model.AvatarUrl))
                        {
                            <img src="@Model.AvatarUrl" alt="Avatar" class="profile-avatar-img" 
                                 onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
                            <div class="profile-avatar-placeholder" style="display: none;">
                                @Model.FullName.Substring(0, 1).ToUpper()
                            </div>
                        }
                        else
                        {
                            <div class="profile-avatar-placeholder">
                                @Model.FullName.Substring(0, 1).ToUpper()
                            </div>
                        }
                        
                        <div class="profile-avatar-edit" onclick="document.getElementById('avatarInput').click();" title="ƒê·ªïi ·∫£nh ƒë·∫°i di·ªán">
                            üì∑
                        </div>
                    </div>
                </form>
                
                <div class="profile-name">@Model.FullName</div>
                <div class="profile-email">@Model.Email</div>
                <div class="profile-role-badge">
                    @switch(Model.Role) {
                        case "Admin": <text>üëë Qu·∫£n tr·ªã vi√™n</text> break;
                        case "Staff": <text>üë®‚Äçüíº Nh√¢n vi√™n</text> break;
                        case "Shipper": <text>üöö Shipper</text> break;
                        default: <text>üõí Kh√°ch h√†ng</text> break;
                    }
                </div>
            </div>
            
            <!-- Form Section -->
            <div class="profile-form-section">
                @if (TempData["Success"] != null || ViewBag.Success != null)
                {
                    <div class="profile-alert success">
                        ‚úÖ @(TempData["Success"] ?? ViewBag.Success)
                    </div>
                }
                
                @if (TempData["Error"] != null)
                {
                    <div class="profile-alert error">
                        ‚ö†Ô∏è @TempData["Error"]
                    </div>
                }
                
                <form method="post" action="/Account/Profile">
                    <div class="form-row">
                        <div class="profile-form-group">
                            <label>üë§ H·ªç v√† t√™n</label>
                            <input type="text" name="FullName" value="@Model.FullName" required />
                        </div>
                        
                        <div class="profile-form-group">
                            <label>üì± S·ªë ƒëi·ªán tho·∫°i</label>
                            <input type="tel" name="Phone" value="@Model.Phone" placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i" />
                        </div>
                    </div>
                    
                    <div class="profile-form-group">
                        <label>üìß Email</label>
                        <input type="email" value="@Model.Email" disabled />
                        <p class="form-hint">Email kh√¥ng th·ªÉ thay ƒë·ªïi</p>
                    </div>
                    
                    <div class="profile-form-group">
                        <label>üìç ƒê·ªãa ch·ªâ giao h√†ng</label>
                        <input type="text" name="Address" value="@Model.Address" placeholder="Nh·∫≠p ƒë·ªãa ch·ªâ giao h√†ng" />
                    </div>
                    
                    <hr class="form-divider" />
                    
                    <div class="profile-form-group">
                        <label>üîí ƒê·ªïi m·∫≠t kh·∫©u</label>
                        <input type="password" name="Password" placeholder="ƒê·ªÉ tr·ªëng n·∫øu kh√¥ng ƒë·ªïi m·∫≠t kh·∫©u" />
                        <p class="form-hint">Nh·∫≠p m·∫≠t kh·∫©u m·ªõi n·∫øu b·∫°n mu·ªën thay ƒë·ªïi</p>
                    </div>
                    
                    <button type="submit" class="btn-save-profile">
                        üíæ L∆∞u thay ƒë·ªïi
                    </button>
                </form>
            </div>
            
            <!-- Quick Links -->
            <div class="profile-quick-links">
                <a href="/" class="quick-link">üè† Trang ch·ªß</a>
                <a href="/Order/History" class="quick-link">üì¶ L·ªãch s·ª≠ ƒë∆°n h√†ng</a>
                <a href="/Account/Logout" class="quick-link">üö™ ƒêƒÉng xu·∫•t</a>
            </div>
        </div>
    </div>
</div>