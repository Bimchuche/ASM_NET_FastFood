@model List<ASM1_NET.Models.UserAddress>
@{
    ViewData["Title"] = "Äá»‹a chá»‰ giao hÃ ng";
}

<link rel="stylesheet" href="~/client/css/fastfood-theme.css" />
<link rel="stylesheet" href="~/client/css/address.css" />

<div class="address-page">
    <div class="container">
        <div class="address-hero">
            <h1>ğŸ“ Äá»‹a chá»‰ giao hÃ ng</h1>
            <p>Quáº£n lÃ½ cÃ¡c Ä‘á»‹a chá»‰ nháº­n hÃ ng cá»§a báº¡n</p>
        </div>

        <div class="address-actions">
            <button class="btn-add-address" onclick="showAddModal()">â• ThÃªm Ä‘á»‹a chá»‰ má»›i</button>
            <a href="/Account/Profile" class="btn-back">â† Quay láº¡i há»“ sÆ¡</a>
        </div>

        <div class="address-list" id="addressList">
            @if (Model.Count == 0)
            {
                <div class="empty-state">
                    <div class="empty-icon">ğŸ“­</div>
                    <h3>ChÆ°a cÃ³ Ä‘á»‹a chá»‰ nÃ o</h3>
                    <p>ThÃªm Ä‘á»‹a chá»‰ giao hÃ ng Ä‘á»ƒ Ä‘áº·t hÃ ng nhanh hÆ¡n!</p>
                </div>
            }
            else
            {
                @foreach (var addr in Model)
                {
                    <div class="address-card @(addr.IsDefault ? "default" : "")" data-id="@addr.Id">
                        @if (addr.IsDefault)
                        {
                            <span class="default-badge">âœ“ Máº·c Ä‘á»‹nh</span>
                        }
                        <h3>@addr.Name</h3>
                        <p class="address-full">@addr.FullAddress</p>
                        @if (!string.IsNullOrEmpty(addr.Phone))
                        {
                            <p class="address-phone">ğŸ“ @addr.Phone</p>
                        }
                        <div class="address-card-actions">
                            @if (!addr.IsDefault)
                            {
                                <button class="btn-set-default" onclick="setDefault(@addr.Id)">Äáº·t máº·c Ä‘á»‹nh</button>
                            }
                            <button class="btn-edit" onclick="editAddress(@addr.Id, '@addr.Name', '@addr.FullAddress.Replace("'", "\\'")', '@addr.Phone', @addr.IsDefault.ToString().ToLower())">Sá»­a</button>
                            <button class="btn-delete" onclick="deleteAddress(@addr.Id)">XÃ³a</button>
                        </div>
                    </div>
                }
            }
        </div>
    </div>
</div>

<!-- Add/Edit Modal -->
<div id="addressModal" class="modal-overlay" style="display:none;">
    <div class="modal-content">
        <h3 id="modalTitle">â• ThÃªm Ä‘á»‹a chá»‰ má»›i</h3>
        <form id="addressForm">
            <input type="hidden" id="addressId" value="" />
            <div class="form-group">
                <label>ğŸ“ TÃªn Ä‘á»‹a chá»‰</label>
                <input type="text" id="addressName" placeholder="VD: NhÃ , CÃ´ng ty..." required />
            </div>
            <div class="form-group">
                <label>ğŸ“ Äá»‹a chá»‰ Ä‘áº§y Ä‘á»§</label>
                <textarea id="fullAddress" rows="3" placeholder="Sá»‘ nhÃ , Ä‘Æ°á»ng, phÆ°á»ng, quáº­n, thÃ nh phá»‘..." required></textarea>
            </div>
            <div class="form-group">
                <label>ğŸ“ Sá»‘ Ä‘iá»‡n thoáº¡i</label>
                <input type="tel" id="addressPhone" placeholder="Sá»‘ Ä‘iá»‡n thoáº¡i nháº­n hÃ ng" />
            </div>
            <div class="form-group checkbox-group">
                <label>
                    <input type="checkbox" id="isDefault" />
                    <span>Äáº·t lÃ m Ä‘á»‹a chá»‰ máº·c Ä‘á»‹nh</span>
                </label>
            </div>
            <div class="modal-buttons">
                <button type="submit" class="btn-save">ğŸ’¾ LÆ°u</button>
                <button type="button" class="btn-cancel" onclick="closeModal()">Há»§y</button>
            </div>
        </form>
    </div>
</div>

<script src="~/client/js/address-page.js"></script>
